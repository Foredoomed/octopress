<div class="highlight"><pre><span class="k">function</span> <span class="nf">foo</span><span class="p">()</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">hello&quot;</span><span class="p">)</span>
	<span class="nb">coroutine.yield</span><span class="p">()</span> <span class="c1">-- 在这里挂起coroutine</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">world&quot;</span><span class="p">)</span> 
<span class="k">end</span>

<span class="kd">local</span> <span class="n">co</span> <span class="o">=</span> <span class="nb">coroutine.create</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span> <span class="c1">-- co保存的是上下文变量</span>
<span class="nb">coroutine.resume</span><span class="p">(</span><span class="n">co</span><span class="p">)</span>         <span class="c1">-- 只打印出 hello</span>
<span class="nb">coroutine.resume</span><span class="p">(</span><span class="n">co</span><span class="p">)</span>         <span class="c1">-- 只打印出 world</span>
</pre></div>