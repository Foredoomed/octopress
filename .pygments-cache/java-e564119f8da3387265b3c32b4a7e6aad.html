<div class="highlight"><pre>  <span class="kd">public</span> <span class="n">BoundSql</span> <span class="nf">getBoundSql</span><span class="o">(</span><span class="n">Object</span> <span class="n">parameterObject</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">DynamicContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DynamicContext</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">parameterObject</span><span class="o">);</span>
    <span class="n">rootSqlNode</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
    <span class="n">SqlSourceBuilder</span> <span class="n">sqlSourceParser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SqlSourceBuilder</span><span class="o">(</span><span class="n">configuration</span><span class="o">);</span>
    <span class="n">Class</span><span class="o">&amp;</span><span class="n">lt</span><span class="o">;?&amp;</span><span class="n">gt</span><span class="o">;</span> <span class="n">parameterType</span> <span class="o">=</span> <span class="n">parameterObject</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">Object</span><span class="o">.</span><span class="na">class</span> <span class="o">:</span> <span class="n">parameterObject</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
    <span class="n">SqlSource</span> <span class="n">sqlSource</span> <span class="o">=</span> <span class="n">sqlSourceParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getSql</span><span class="o">(),</span> <span class="n">parameterType</span><span class="o">);</span>
    <span class="n">BoundSql</span> <span class="n">boundSql</span> <span class="o">=</span> <span class="n">sqlSource</span><span class="o">.</span><span class="na">getBoundSql</span><span class="o">(</span><span class="n">parameterObject</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&amp;</span><span class="n">lt</span><span class="o">;</span><span class="n">string</span> <span class="o">,</span> <span class="n">Object</span><span class="o">&amp;</span><span class="n">gt</span><span class="o">;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">context</span><span class="o">.</span><span class="na">getBindings</span><span class="o">().</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">boundSql</span><span class="o">.</span><span class="na">setAdditionalParameter</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">boundSql</span><span class="o">;</span>
  <span class="o">}</span>
</pre></div>